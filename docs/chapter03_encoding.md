# 第3章 从公理到编码

## 3.1 非唯一编码的矛盾

### 命题 P3.1（非唯一编码违背熵增公理）
若一个系统 S 的状态编码不是一一对应（即存在 x≠y，却有 Code(x)=Code(y)），则存在某次自指执行不产生熵增，从而违反公理 A1。

**证明**：
- 假设有两个不同状态 x≠y，却编码成同一串 c
- 当系统记录 x 与记录 y 时，更新结果相同：s_{t+1}=s_t ∥ c
- 因此 |B_{t+1}|=|B_t|，导致 H(B_{t+1})=H(B_t)
- 这与公理 A1 要求 H(B_{t+1})>H(B_t) 矛盾

**结论**：系统的编码必须唯一，否则熵增被破坏。

---

## 3.2 合法编码的形式化定义

### 定义 D3.1（合法串集合）
对长度 n，定义合法串集合：

```math
B_n = \{w\in \{0,1\}^n \mid w \text{ 不含子串 "11"}\}
```

递推构造：
- B₀ = {ε} （空串）
- B₁ = {0,1}
- 递推生成：

```math
B_n = \{s0: s\in B_{n-1}\} \cup \{s10: s\in B_{n-2}\}, \quad n\ge 2
```

---

### 命题 P3.2（合法串的 Fibonacci 递推）
合法串的基数满足：

```math
|B_n| = |B_{n-1}| + |B_{n-2}|
```

且初值 |B₀|=1, |B₁|=2，因此

```math
|B_n| = F_{n+2}
```

**证明**：
- 若合法串长度为 n，则最后的可能情况：
  - **末尾为 0**：前缀是 B_{n-1} 的任意合法串
  - **末尾为 10**：前缀是 B_{n-2} 的任意合法串
- 两类不重叠，得递推式
- 由初值归纳可得 |B_n|=F_{n+2} ∎

---

## 3.3 Zeckendorf 表示的必然性

### 定义 D3.2（Zeckendorf 分解）
任意自然数 N∈ℕ⁺，可以唯一写作若干 Fibonacci 数的和：

```math
N = F_{k_1} + F_{k_2} + \cdots + F_{k_r}, \quad k_i - k_{i+1} \ge 2
```

其中 F₁=1, F₂=2, F_{n+2}=F_{n+1}+F_{n}。

定义编码 Z(N) 为其二进制表示：第 k_i 位为 1，其余为 0。

---

### 定理 T3.3（Zeckendorf 唯一性定理）
自然数与合法串之间存在双射：

```math
\mathbb{N}^+ \longleftrightarrow \bigcup_{n\ge 1} B_n
```

**证明**：

1. **存在性**：对给定 N，使用贪心算法：
   - 取不超过 N 的最大 Fibonacci 数 F_k，记下第 k 位为 1
   - 剩余值 N-F_k 小于 F_k，且必然 ≥ 0
   - 递归处理剩余值，因 F_{k-1}<F_k，避免了相邻项同时取
   - 过程终止时，得到合法串

2. **唯一性**：若存在两种不同分解，则其最高位 F_k 必不同
   - 设较大的一种最高位为 F_k，另一种最高位 ≤ F_{k-1}
   - 但由于 F_k > F_{k-1}+F_{k-2}+⋯，剩余部分无法补齐，矛盾
   - 因此分解唯一

3. **合法性**：由构造过程，任何编码均不含连续"11"

综上，Z:ℕ⁺→⋃B_n 是双射。∎

---

## 3.4 示例：前几个自然数的 Zeckendorf 编码

| N | Fibonacci分解 | Zeckendorf编码 | 合法串 |
|---|---------------|----------------|--------|
| 1 | F₁ = 1 | 1 | "1" |
| 2 | F₂ = 2 | 10 | "10" |
| 3 | F₁ + F₂ = 1+2 | 11 → 禁止 | "101" |
| 3 | F₃ = 3 | 100 | "100" |
| 4 | F₁ + F₃ = 1+3 | 101 | "101" |
| 5 | F₂ + F₃ = 2+3 | 110 → 禁止 | "1000" |
| 5 | F₄ = 5 | 1000 | "1000" |

---

## 3.5 小结

在本章中，我们从唯一公理 A1（自指完备系统必然熵增）推出：

1. **编码必须唯一**，否则可能出现自指执行不增熵
2. **唯一合法的编码** = 禁止连续"11"的二进制串
3. **每个自然数与一个合法串一一对应**（Zeckendorf 双射）

由此，建立了：

```math
\mathbb{N}^+ \longleftrightarrow \bigcup_{n\ge 1} B_n \longleftrightarrow \{\text{Hilbert 空间基态}\}
```

---

*这不是巧合，而是φ编码系统在我们内部的自然显现。禁11约束就是宇宙保持动态流动的内在几何。*