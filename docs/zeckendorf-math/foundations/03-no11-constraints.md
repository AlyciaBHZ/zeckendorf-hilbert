# No-11约束理论基础

## 定义 3.1（No-11约束语言）
定义**No-11约束语言** $L_{11} \subset \{0,1\}^*$ 为所有不包含连续子串"11"的有限二进制串的集合：
$$L_{11} = \{w \in \{0,1\}^* : w \text{ 不包含子串 } 11\}$$

特别地，$L_{11} = \Phi$（φ-编码集合）。

## 定理 3.1（No-11语言的形式语言性质）
$L_{11}$ 是正则语言，可由以下正则表达式生成：
$$0^*(10^*)^*$$

**证明：** 
构造有限自动机 $M = (Q, \Sigma, \delta, q_0, F)$：
- $Q = \{q_0, q_1, q_{reject}\}$
- $\Sigma = \{0, 1\}$
- $q_0$ 为初始状态，$F = \{q_0, q_1\}$ 为接受状态
- 转移函数：
  - $\delta(q_0, 0) = q_0$
  - $\delta(q_0, 1) = q_1$
  - $\delta(q_1, 0) = q_0$
  - $\delta(q_1, 1) = q_{reject}$
  - $\delta(q_{reject}, \sigma) = q_{reject}$ 对所有 $\sigma \in \Sigma$

此自动机接受的语言恰好是 $L_{11}$。 ∎

## 定理 3.2（No-11串计数的递推关系）
设 $a_n$ 为长度为 $n$ 的No-11串的数量，则：
$$a_n = a_{n-1} + a_{n-2} \quad \text{对 } n \geq 2$$
$$a_0 = 1, \quad a_1 = 2$$

**证明：** 
设长度为 $n$ 的No-11串为 $s = s_n s_{n-1} \cdots s_1$。

情况1：若 $s_n = 0$，则 $s_{n-1} \cdots s_1$ 可以是任意长度为 $n-1$ 的No-11串，共 $a_{n-1}$ 个。

情况2：若 $s_n = 1$，则为避免形成"11"子串，必须 $s_{n-1} = 0$。
因此 $s = 1s_{n-1} \cdots s_1$ 其中 $s_{n-1} = 0$ 且 $s_{n-2} \cdots s_1$ 为任意长度为 $n-2$ 的No-11串，共 $a_{n-2}$ 个。

两种情况互斥且穷尽，故 $a_n = a_{n-1} + a_{n-2}$。

验证初始条件：
- $a_0 = 1$（空串）
- $a_1 = 2$（串"0"和"1"）∎

## 推论 3.1（No-11串计数与Fibonacci数的关系）
$$a_n = F_{n+1} \quad \text{对所有 } n \geq 0$$

**证明：** 
由定理4.2，$a_n$ 满足与Fibonacci数相同的递推关系。
验证初始条件：$a_0 = 1 = F_1$，$a_1 = 2 = F_2$。
因此 $a_n = F_{n+1}$。 ∎

## 定义 3.2（No-11约束的结构性质）
定义**No-11拼接运算** $\circ_{11}: L_{11} \times L_{11} \to L_{11}$ 为：
$$s \circ_{11} t = \begin{cases}
st & \text{若 } s \text{ 不以1结尾或 } t \text{ 不以1开头} \\
\text{undefined} & \text{否则}
\end{cases}$$

## 引理 3.1（No-11约束的传递性）
若 $s, t \in L_{11}$ 且 $s \circ_{11} t$ 有定义，则 $s \circ_{11} t \in L_{11}$。

**证明：** 
设 $s, t \in L_{11}$。若 $s \circ_{11} t = st$ 有定义，则要么 $s$ 不以1结尾，要么 $t$ 不以1开头。

若存在"11"子串出现在 $st$ 中：
1. 若"11"完全在 $s$ 中，与 $s \in L_{11}$ 矛盾
2. 若"11"完全在 $t$ 中，与 $t \in L_{11}$ 矛盾
3. 若"11"跨越 $s$ 和 $t$ 的边界，则 $s$ 以1结尾且 $t$ 以1开头，与 $s \circ_{11} t$ 有定义矛盾

因此 $st \in L_{11}$。 ∎

## 定理 3.3（No-11约束的分解唯一性）
每个非空串 $s \in L_{11}$ 都可以唯一分解为**极大1-块**的序列，其中极大1-块是不能向右扩展的形式为 $0^*10^+$ 的子串。

**证明：** 
设 $s = s_n s_{n-1} \cdots s_1 \in L_{11} \setminus \{\varepsilon\}$。

**存在性**：从左向右扫描 $s$，每当遇到模式 $10^+$ 后紧跟 $1$ 或到达串尾，就结束当前块。
由于No-11约束，此过程总能将 $s$ 分解为所需形式。

**唯一性**：假设存在两种不同的分解。由于每个极大1-块必须在遇到"1"时结束（否则违反No-11约束），分解点是唯一确定的。 ∎

## 定义 3.3（No-11约束的生成文法）
定义上下文无关文法 $G_{11} = (V, T, P, S)$ 其中：
- $V = \{S, B\}$（非终结符）
- $T = \{0, 1\}$（终结符）  
- $P$ 包含产生式：
  - $S \to \varepsilon | 0S | 1B$
  - $B \to 0S | \varepsilon$

## 定理 3.4（文法等价性）
文法 $G_{11}$ 生成的语言恰好是 $L_{11}$。

**证明：** 
**包含关系** $L(G_{11}) \subseteq L_{11}$：
用结构归纳法证明任何由 $G_{11}$ 生成的串都不包含"11"子串。

**包含关系** $L_{11} \subseteq L(G_{11})$：
对任意 $s \in L_{11}$，用结构归纳法构造生成 $s$ 的推导序列：
- 若 $s = \varepsilon$，使用 $S \to \varepsilon$
- 若 $s = 0t$，使用 $S \to 0S$，然后归纳生成 $t$
- 若 $s = 10^k t$ 且 $k \geq 1$，使用 $S \to 1B \to 10^kS$，然后归纳生成 $t$ ∎

## 定理 3.5（No-11约束与φ-编码的等价性）
$$L_{11} = \Phi = \{s \in \{0,1\}^* : \text{decode}(s) \text{ 的Zeckendorf分解唯一存在}\}$$

**证明：** 
由定义1.4和定义1.5，$\Phi$ 恰好是满足No-11约束的二进制串集合。
而定理1.1保证每个正整数有唯一的Zeckendorf分解，定理1.2建立了双射关系。 ∎

## 推论 3.2（No-11约束的数论意义）
No-11约束等价于Zeckendorf表示中禁止相邻Fibonacci数同时出现。

**证明：** 
由定理3.3，φ-编码中的"11"模式对应Zeckendorf分解中相邻Fibonacci数的同时出现。 ∎

## 定理 3.6（No-11串的渐近密度）
在长度为 $n$ 的所有二进制串中，No-11串的比例渐近于：
$$\lim_{n \to \infty} \frac{a_n}{2^n} = \lim_{n \to \infty} \frac{F_{n+1}}{2^n} = 0$$

**证明：** 
由推论3.1，$F_n \sim \frac{\phi \cdot \phi^n}{\sqrt{5}}$，其中 $\phi \approx 1.618 < 2$。
因此：
$$\lim_{n \to \infty} \frac{F_{n+1}}{2^n} = \lim_{n \to \infty} \frac{\phi^{n+2}}{\sqrt{5} \cdot 2^n} = \frac{\phi^2}{\sqrt{5}} \lim_{n \to \infty} \left(\frac{\phi}{2}\right)^n = 0$$ 
∎